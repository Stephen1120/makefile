Makefile
===========

1 基本语法
------------

一个简单的Makefile包含很多规则(Rule)，每一条规则的语法结构由目标(Target)、先决条件(Prerequisite)、动作(Recipe)三部分组成：

目标：通常有两种命名方法，一是与要生成的可执行文件或目标文件同名，二是说明动作的目的，例如最常见的clean清理规则。对于第二种规则命名，为了避免与同名文件冲突，可以将目标名加入到.PHONY伪目标列表中。默认情况下，make执行Makefile中的第一个规则，此规则被称为最终目标

先决条件：先决条件是用来创建目标的输入文件，一个目标可以依赖多个先决条件
动作：动作由Make命令负责执行，可以包含多个命令，每个命令可以另起一行。一定要注意的是：命令必须以TAB开头！

```
target: prerequisite
	recipe
```

2 实现原理
------------

Make看似非常智能，其实它的原理就像其语法规则一样简单。

确定目标：如果没有指明，则执行最终目标，即第一个规则的目标
处理变量和规则：替换变量，推导隐式规则
生成依赖关系链：为所有目标生成依赖关系链
递归构建：从依赖链的底部向上，根据先决条件会有三种情况： 

* 先决条件不存在，则执行规则中的命令 
* 先决条件存在，且至少一个比目标“更新”，则执行规则中的命令重新生成 
* 先决条件存在，且都比目标“更旧”， 则什么都不做

3 变量
------

在Makefile中，我们可以用变量来替换重复出现在先决条件或动作中的字符串。

4 隐式规则
----------


5 模式规则
------------


6 Makefile生成工具
------------------

#### 6.1 Automake




#### 6.2 cmake




